<!DOCTYPE html>
<html>

<head>
    <title>Job List</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons' rel="stylesheet">
    <link href="https://cloudjs.github.io/js/vuetify.min.css" rel="stylesheet">
    <script src="https://cloudjs.github.io/js/vue.min.js"></script>
    <script src="https://cloudjs.github.io/js/vuetify.min.js"></script>
    <style>
        .v-list--three-line .v-list__tile {
            height: 72px !important;
        }

        .round-list {
            border-radius: 10px;
        }
    </style>

    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="google-signin-client_id" content="166120274351-oioj77njs7mtbfpiipe56uvjkbqps03n.apps.googleusercontent.com">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-158844611-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-158844611-1');
        gtag('config', 'AW-770861134');
    </script>

</head>

<body>
    <div id="app">
        <v-app light>
            <v-toolbar class="white">
                <v-toolbar-title>
                    <svg width="142" height="20" viewBox="0 0 142 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M25.6944 19H14.2944L17.5944 0.25H23.2944L20.8344 14.2H26.5344L25.6944 19ZM13.3944 18.91L0.674377 17.56H13.6344L13.3944 18.91ZM14.4144 13.12L1.69438 11.77H14.6544L14.4144 13.12ZM14.9244 10.24L2.20438 8.89H15.1644L14.9244 10.24ZM15.4344 7.36L2.71438 6.01H15.6744L15.4344 7.36ZM15.9444 4.48L3.22438 3.13H16.1544L15.9444 4.48ZM13.9044 16L1.18438 14.65H14.1444L13.9044 16ZM16.4244 1.6L3.73438 0.25H16.6644L16.4244 1.6ZM37.4763 19H31.4763L39.3663 0.25H48.1863L49.5063 19H43.4763L43.3563 16.03H38.6463L37.4763 19ZM42.9063 11.26V6.01H42.6063L40.5063 11.26H42.9063ZM30.5163 18.88L18.2163 17.56H31.0863L30.5163 18.88ZM31.7463 15.97L19.4463 14.65H32.3163L31.7463 15.97ZM32.9763 13.09L20.6763 11.77H33.5163L32.9763 13.09ZM34.1763 10.21L21.9063 8.89H34.7463L34.1763 10.21ZM35.4063 7.33L23.1363 6.01H35.9463L35.4063 7.33ZM37.8363 1.54L25.5963 0.25H38.3763L37.8363 1.54ZM36.6063 4.42L24.3663 3.13H37.1463L36.6063 4.42ZM37.8363 1.54L38.3763 0.25H25.5963L37.8363 1.54ZM70.2679 0.25C71.7079 0.25 72.7479 0.5 73.3879 0.999999C74.0479 1.5 74.3779 2.27 74.3779 3.31C74.3779 4.83 74.0379 6.08 73.3579 7.06C72.6979 8.04 71.8879 8.65 70.9279 8.89L70.8979 9.07C72.6979 9.41 73.5979 10.6 73.5979 12.64C73.5979 14.44 73.1079 15.95 72.1279 17.17C71.1479 18.39 69.7679 19 67.9879 19H57.7279L61.0279 0.25H70.2679ZM66.9679 11.53H64.7179L64.1779 14.59H66.3979C66.8979 14.59 67.2779 14.39 67.5379 13.99C67.7979 13.59 67.9279 13.08 67.9279 12.46C67.9279 11.84 67.6079 11.53 66.9679 11.53ZM67.8079 4.36H66.0079L65.4979 7.15H67.2679C68.1879 7.15 68.6479 6.5 68.6479 5.2C68.6479 4.64 68.3679 4.36 67.8079 4.36ZM56.8279 18.91L44.1079 17.56H57.0679L56.8279 18.91ZM57.8479 13.12L45.1279 11.77H58.0879L57.8479 13.12ZM58.3579 10.24L45.6379 8.89H58.5979L58.3579 10.24ZM58.8679 7.36L46.1479 6.01H59.1079L58.8679 7.36ZM59.3779 4.48L46.6579 3.13H59.5879L59.3779 4.48ZM57.3379 16L44.6179 14.65H57.5779L57.3379 16ZM59.8579 1.6L47.1679 0.25H60.0979L59.8579 1.6ZM92.7343 19H81.3343L84.6343 0.25H90.3343L87.8743 14.2H93.5743L92.7343 19ZM80.4343 18.91L67.7143 17.56H80.6743L80.4343 18.91ZM81.4543 13.12L68.7343 11.77H81.6943L81.4543 13.12ZM81.9643 10.24L69.2443 8.89H82.2043L81.9643 10.24ZM82.4743 7.36L69.7543 6.01H82.7143L82.4743 7.36ZM82.9843 4.48L70.2643 3.13H83.1943L82.9843 4.48ZM80.9443 16L68.2243 14.65H81.1843L80.9443 16ZM83.4643 1.6L70.7743 0.25H83.7043L83.4643 1.6ZM101.39 7.36L88.6705 6.01H101.63L101.39 7.36ZM100.88 10.24L88.1905 8.89H101.12L100.88 10.24ZM102.41 1.6L89.7205 0.25H102.65L102.41 1.6ZM89.2105 3.13H102.14L101.9 4.48L89.2105 3.13ZM100.61 11.77C100.53 12.43 100.48 12.88 100.46 13.12L87.7705 11.77H100.61ZM100.4 14.65C100.4 15.13 100.43 15.58 100.49 16L87.8005 14.65H100.4ZM100.91 17.56C101.17 18.12 101.49 18.57 101.87 18.91L89.1805 17.56H100.91ZM108.83 14.32C109.53 14.32 110.03 14.23 110.33 14.05C110.63 13.85 110.84 13.41 110.96 12.73L113.18 0.25H118.88L117.02 10.78C116.72 12.48 116.37 13.85 115.97 14.89C115.59 15.93 115.05 16.81 114.35 17.53C113.65 18.25 112.78 18.75 111.74 19.03C110.72 19.31 109.42 19.45 107.84 19.45C105.42 19.45 103.72 19.09 102.74 18.37C101.78 17.63 101.3 16.37 101.3 14.59C101.3 13.61 101.44 12.34 101.72 10.78L103.58 0.25H109.28L106.79 14.32H108.83ZM137.808 11.92H132.108L131.718 14.2H138.708L137.868 19H125.178L128.478 0.25H141.018L139.458 5.05H133.308L132.888 7.57H138.588L137.808 11.92ZM124.278 18.91L111.558 17.56H124.518L124.278 18.91ZM125.298 13.12L112.578 11.77H125.538L125.298 13.12ZM125.808 10.24L113.088 8.89H126.048L125.808 10.24ZM126.318 7.36L113.598 6.01H126.558L126.318 7.36ZM126.828 4.48L114.108 3.13H127.038L126.828 4.48ZM124.788 16L112.068 14.65H125.028L124.788 16ZM127.308 1.6L114.618 0.25H127.548L127.308 1.6Z"
                            fill="#F2994A" />
                    </svg>

                </v-toolbar-title>
            </v-toolbar>
            <v-content>

                <!-- sign up form -->
                <v-row justify="center">
                    <v-dialog v-model="dialog" persistent max-width="300" class="round-list ">
                        <v-card class="round-list white">
                            <v-card-title>
                                <b style="font-size: 18px;">Start Your Applications</b>
                            </v-card-title>
                            <v-card-text>
                                <!-- <v-select :items="positions" label="Positions" box chips multiple v-model='k'></v-select> -->
                                <v-text-field label="Position" v-model="form.q" box @change="checkdisabled()"
                                    v-if='show_q'></v-text-field>
                                <v-text-field label="Zipcode" v-model="form.zipcode" box mask="#####"
                                    @change="checkdisabled()" v-if='show_l'></v-text-field>
                                <v-text-field label="Email" v-model="form.email" box @change="checkdisabled()"></v-text-field>

                               
                                <small class="muted grey--text text--lighten-1">By clicking button below, I agree to the
                                    Terms of Use and Privacy Policy. By providing your phone number, you will receive
                                    texts for our newsletters. Consent not required for use of services.</small>
                            </v-card-text>
                            <v-card-actions class="pb-4">
                                <!-- <v-btn flat text @click="skip()" class="muted grey--text">
                                    skip
                                </v-btn>
                                <v-spacer></v-spacer> -->
                                <v-btn depressed block round color="primary" @click="subscribe()" :disabled="disabled">
                                    Continue</v-btn>

                            </v-card-actions>
                        </v-card>
                    </v-dialog>
                </v-row>



                <!-- list -->

                <v-layout column align-center justify-center>
                    <v-container fluid>
                        <v-flex xs12 md6 offset-md3>
                            <!-- <p style="font-size: 18px; font-weight: bold;">{{ startCase(q) }} {{ title }}</p> -->
                            <!-- <v-text-field label="Position" v-model="q" box @blur="getData()"></v-text-field> -->

                            <!-- <v-layout row wrap>
                                <v-flex v-for="(item, index) in items" :key="index" xs4 d-flex v-if="index<21">
                                    <v-card flat tile class="d-flex" @click="goto(item.url)">
                                        <v-img :src="item.logo_url"
                                            :lazy-src="item.logo_url"
                                            aspect-ratio="1" class="grey lighten-2">
                                            <template v-slot:placeholder>
                                                <v-layout fill-height align-center justify-center ma-0>
                                                    <v-progress-circular indeterminate color="grey lighten-5">
                                                    </v-progress-circular>
                                                </v-layout>
                                            </template>
                                        </v-img>
                                        
                                    </v-card>
                                </v-flex>
                            </v-layout> -->


                            <p class="mt-1" style="font-size:14px; font-weight: bold;">
                                Click to apply now!
                            </p>
                            <div class="g-signin2" data-onsuccess="onSignIn"></div>
                            <v-list three-line flat class="grey lighten-5">
                                <template v-for="(item, index) in items">
                                    <!-- && item.price=='high' -->
                                    <v-list-tile v-if="checkTitle(item.title, q, item.company)" class="mb-2 white"
                                        @click="goto(item.url)" :key="index">
                                        <v-list-tile-avatar tile size="48" class="mt-1">
                                            <img :src="item.logo_url">
                                        </v-list-tile-avatar>

                                        <v-list-tile-content class="mt-1">
                                            <v-list-tile-title class="blue--text text--darken-3">
                                                <strong>{{ normalize(item.company) }}</strong>
                                            </v-list-tile-title>
                                            <v-list-tile-sub-title>{{ normalize(item.title) }}</v-list-tile-sub-title>
                                        </v-list-tile-content>

                                        <!-- <v-list-tile-action>
                                            <v-btn depressed round small color="primary">Click</v-btn>
                                        </v-list-tile-action> -->

                                    </v-list-tile>

                                </template>
                            </v-list>
                        </v-flex>
                    </v-container>
                </v-layout>
            </v-content>
        </v-app>
    </div>

    <script src="https://cloudjs.github.io/js/axios.min.js"></script>
    <script src="https://cloudjs.github.io/js/lodash.min.js"></script>

    <script>
        new Vue({
            el: '#app',
            data() {
                return {
                    title: '',
                    dialog: false,
                    items: [],
                    l: "0",
                    q: "Driver",

                    k: ['Cashier', 'Sales Associate', 'Driver', 'Customer Service'],
                    positions: ['Cashier', 'Sales Associate', 'Stock Associate', 'Driver', 'Customer Service',
                        'Manager'
                    ],
                    form: {
                        email: "",
                        q: "",
                        zipcode: ""
                    },
                    show_q: true,
                    show_l: true,
                    disabled: true
                }
            },
            methods: {
                getUrlVars() {
                    var vars = {};
                    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key,
                        value) {
                        vars[key] = value;
                    });
                    return vars;
                },
                goto(url) {
                    // ga event
                    gtag('event', 'click_job', {
                        'event_category': 'click_r1',
                        'event_label': this.url,
                        'value': 0
                    });
                    gtag('event', 'conversion', {
                        'send_to': 'AW-770861134/e8BoCKXb9aQBEM7Qye8C'
                    });
                    // end ga event
                    url = 'https://api.apply-now.io/api/v1/go?u=' + url;
                    let newTab = window.open();
                    newTab.location.href = url;
                },
                getData() {
                    let url = "https://api.apply-now.io/api/v1/ja/0/" + this.encodeUrl(this.q) + "/" + this.l
                    axios
                        .get(url)
                        .then(response => {
                            this.items = _.uniqBy(response.data['jobs'], 'company');
                        });
                },
                encodeUrl(q) {
                    q1 = q.replace('/', ' ')
                    q1 = q1.replace(/\s{2,}/i, " ")
                    return encodeURI(q1)
                },
                checkTitle(a, q, c) {
                    a1 = a.toLowerCase()
                    q1 = q.toLowerCase()
                    c1 = c.toLowerCase()
                    if (c1.includes('ad') || c1.includes('confidential') || c1.includes('stevens trucking'))
                        return false;
                    return a1.includes(q1);
                },
                normalize(s) {
                    if (s.length > 30) return s.substring(0, 30) + '...'
                    return s
                },
                subscribe() {
                    axios.post('https://api.apply-now.io/api/v1/subscription/addq', this.form)
                        .then((response) => {
                            this.dialog = false;
                            url = this.items[0].url
                            this.goto(url)
                        })
                },
                skip() {
                    this.dialog = false;
                    url = this.items[0].url
                    this.goto(url)
                },
                checkdisabled() {
                    if (this.form['email'] != '' && this.form['zipcode'] != '' && this.form['q'] != '') this
                        .disabled = false;
                    else this.disabled = true;
                },
                startCase(q) {
                    return _.startCase(q)
                },

            },
            created() {
                if (decodeURI(this.getUrlVars()['l']) != "undefined")
                    this.l = decodeURI(this.getUrlVars()['l']);
                if (decodeURI(this.getUrlVars()['q']) != "undefined")
                    this.q = decodeURI(this.getUrlVars()['q']);
                if (this.q != '') {
                    this.form['q'] = this.startCase(this.q)
                    // this.show_q = false
                }
                this.getData();
            },
        })


        function onSignIn(googleUser) {
  var profile = googleUser.getBasicProfile();
  console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
  console.log('Name: ' + profile.getName());
  console.log('Image URL: ' + profile.getImageUrl());
  console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
}
    </script>
</body>

</html>
